/* ===========================
   User Menu Popover (공용)
   =========================== */

/* 기본 컨테이너 */
.user-menu {
  position: relative;
  background: #fff;
  border: 1px solid #000;
  border-radius: 16px;
  box-shadow: 0 14px 36px rgba(0,0,0,0.2);
  min-width: 200px;
  max-width: 86vw;
  padding: 8px 0 8px;
  animation: bubble-pop-in 140ms ease-out, bubble-fade-slide 200ms ease-out;
  transform-origin: top right;
}

/* PC/Nav: 앵커(.user-anchor) 아래에 붙는 기본 위치 */
.user-anchor .user-menu {
  position: absolute;
  top: calc(100% + 12px + var(--nudge-y, 0px));
  right: calc(0px + var(--nudge-x, 0px));
  z-index: 1000;
}

/* Mobile: 탭바 위에 고정 (m-tabbar의 높이 변수 사용, 없으면 64px) */
.user-menu.is-mob {
  position: fixed;
  right: 12px;
  bottom: calc(var(--m-tabbar-h, 64px) + 12px);
  z-index: 9999;
  min-width: 220px;
  max-width: min(92vw, 320px);
}

/* 화살표 (PC 기본: 위쪽) */
.user-menu__arrow {
  position: absolute;
  top: -7px;
  right: var(--arrow-right, 35px);
  width: 12px;
  height: 12px;
  background: #fff;
  transform: rotate(45deg);
  border-top: 1px solid #000;
  border-left: 1px solid #000;
  box-shadow: -1px -1px 1px rgba(0,0,0,0.05);
}

/* Mobile 화살표: 아래쪽 */
.user-menu.is-mob .user-menu__arrow {
  top: auto;
  bottom: -6px;
  right: var(--arrow-right, 28px);
}

/* 헤더/프로필 */
.user-menu__header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px 6px;
  border-bottom: 1px dashed #ddd;
}
.user-menu__avatar {
  display: inline-flex;
  width: 28px;
  height: 28px;
  border: 1px solid #000;
  border-radius: 50%;
  align-items: center;
  justify-content: center;
  background: #FFFDE9;
  font-size: 14px;
}
.user-menu__meta { line-height: 1.2; }
.user-menu__name { display: block; font-size: 14px; }
.user-menu__role { font-size: 12px; color: #666; }
.user-menu__welcome { font-size: 14px; }

/* 목록 */
.user-menu__list { display: flex; flex-direction: column; padding: 6px; }

/* 항목 */
.user-menu__item {
  width: 100%;
  text-align: left;
  background: transparent;
  border: none;
  outline: none;
  padding: 10px 12px;
  border-radius: 10px;
  display: flex;
  gap: 10px;
  align-items: center;
  font-size: 14px;
  cursor: pointer;
  transition: transform 120ms ease, background-color 120ms ease, box-shadow 120ms ease;
}
.user-menu__item:hover { background: #f6f6f6; transform: translateY(-1px); }
.user-menu__item:active { transform: translateY(0); }
.user-menu__item:focus-visible { box-shadow: 0 0 0 2px #000 inset; background: #fff; }

.user-menu__icon { width: 18px; text-align: center; }

/* 구분선 */
.user-menu__divider {
  height: 1px;
  background: repeating-linear-gradient(90deg, #ddd, #ddd 6px, transparent 6px, transparent 12px);
  margin: 6px 8px;
  border-radius: 1px;
}

/* 애니메이션(독립 정의) */
@keyframes bubble-pop-in {
  0% { transform: scale(0.96); }
  100% { transform: scale(1); }
}
@keyframes bubble-fade-slide {
  0% { opacity: 0; translate: 0 -6px; }
  100% { opacity: 1; translate: 0 0; }
}

@media (max-width:768px) {
    .user-menu.is-mob .user-menu__arrow {
    transform: rotate(225deg);
    }
}